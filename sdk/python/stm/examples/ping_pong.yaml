machine:
    description: |
        The ping machine

    name: ThePingMachine
        
    frequency: 5

    preamble: |
        from time import time
        
    states:
    
    -   name: Initial
        enter: |
               print('Starting ping machine')
               ThePingMachine.begin = time()
        transitions:
        -   next: Send
            
    -   name: Send
        transitions:
        -   next: Wait
            do: |
                print("Ping ",end="")
                ThePongMachine.set_state("Receive")
        
    -   name: Wait

    -   name: Receive
        enter: print(str(time() - ThePingMachine.begin) )
        transitions:
        -    next: Send
        
    -   name: Final
        
---
        
machine:
    description: |
        The pong machine

    name: ThePongMachine
        
    frequency: 5

    states:
    
    -   name: Initial
        enter: |
               print('Starting pong machine')
               ThePongMachine.begin = time()
        transitions:
        -   next: Wait
            
    -   name: Send
        transitions:
        -   next: Wait
            do: |
                print("Pong ",end="")
                ThePingMachine.set_state("Receive")
        
    -   name: Wait

    -   name: Receive
        enter: print(str(time() - ThePongMachine.begin))
        transitions:
        -    next: Send
        
    -   name: Final
        